!function(){"use strict";angular.module("app",["ui.router","app.auth","app.main","app.account","app.tasks","app.admin","angulartics","angulartics.google.analytics"])}(),function(){"use strict";function t(t){t.configureStates(n())}function n(){return[{state:"settings",config:{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"settingsController",controllerAs:"vm",authenticate:!0}},{state:"forgotPassword",config:{url:"/forgot",templateUrl:"app/account/forgot-password/forgot-password.html",controller:"forgotPasswordController",controllerAs:"vm"}},{state:"resetPassword",config:{url:"/reset/:token",templateUrl:"app/account/reset-password/reset-password.html",controller:"resetPasswordController",controllerAs:"vm"}},{state:"changePassword",config:{url:"/password",templateUrl:"app/account/change-password/change-password.html",controller:"changePasswordController",controllerAs:"vm"}}]}t.$inject=["routerHelper"],angular.module("app.account",["app.oauthButtons","app.auth"]).run(t)}(),function(){"use strict";function t(t){t.configureStates(n())}function n(){return[{state:"admin",config:{url:"/admin",templateUrl:"app/admin/admin.html",controller:"adminController",controllerAs:"vm",authenticate:"admin"}}]}t.$inject=["routerHelper"],angular.module("app.admin",["app.auth"]).run(t)}(),function(){"use strict";function t(t){t.configureStates(n())}function n(){return[{state:"main",config:{url:"/",templateUrl:"app/main/main.html",controller:"mainController",controllerAs:"vm"}}]}t.$inject=["routerHelper"],angular.module("app.main",["ngDialog","inputDropdown"]).run(t)}(),function(){"use strict";function t(t){t.configureStates(n())}function n(){return[{state:"myOrders",config:{url:"/orders",templateUrl:"app/tasks/orders/orders.html",controller:"ordersController",controllerAs:"vm",authenticate:!0}},{state:"dashboard",config:{url:"/dashboard",templateUrl:"app/tasks/dashboard/dashboard.html",controller:"dashboardController",controllerAs:"vm",authenticate:!0}}]}t.$inject=["routerHelper"],angular.module("app.tasks",["ngDialog","ngResource","app.auth","moment-picker","ng-currency"]).run(t)}(),function(){"use strict";angular.module("app.auth",["ngCookies","ui.router","app.util","ngResource","app.constants"]).config(["$httpProvider",function(t){t.interceptors.push("authInterceptor")}])}(),function(){"use strict";angular.module("app.oauthButtons",[])}(),function(){"use strict";angular.module("app.util",[])}(),function(){"use strict";angular.module("app.constants",[]).constant("appConfig",{userRoles:["guest","user","admin"]})}(),function(){"use strict";function t(t,n,o){function e(t){function e(t,e){t.forEach(function(t){n.state(t.state,t.config)}),e&&!a&&(a=!0,o.otherwise(e))}function r(){return t.get()}var a=!1,s={configureStates:e,getStates:r};return s}this.$get=e,t.html5Mode(!0),e.$inject=["$state"]}angular.module("app").provider("routerHelper",t),t.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t){function n(){o.users=t.query()}var o=this;o.title="adminController",n()}angular.module("app.admin").controller("adminController",t),t.$inject=["User"]}(),function(){"use strict";function t(t){function n(){r.signup=o,r.createTask=e,r.selectedDropdownItem=null,r.dropdownItems=["Pequenos Reparos","Pintura","Eventos","Mudanças","Buscar/Levar ou Comprar Algo","Design e Tecnologia","Montagem e Instalação","Limpeza","Consertos em Geral","Serviços Automotivos","Outras Tarefas"]}function o(){t.openConfirm({template:"app/account/signup/signup.html",className:"ngdialog-theme-plain",controller:"signupController",controllerAs:"vm",data:r.user,closeByDocument:!1,closeByNavigation:!0})}function e(n){t.openConfirm({template:"app/tasks/task/task.html",className:"ngdialog-theme-plain",controller:"taskController",controllerAs:"vm",closeByDocument:!1,closeByNavigation:!0})}var r=this;r.title="mainController",n()}angular.module("app.main").controller("mainController",t),t.$inject=["ngDialog"]}(),function(){"use strict";function t(t){var n=t("/api/tasks/:id/:controller",{id:"@_id"},{mine:{method:"GET",params:{id:"mine"}},deactivate:{method:"PUT",params:{controller:"deactivate"}},apply:{method:"PUT",params:{controller:"apply"}},unapply:{method:"PUT",params:{controller:"unapply"}}});return n}angular.module("app.tasks").factory("TaskService",t),t.$inject=["$resource"]}(),function(){"use strict";function t(t){function n(){e.updatePassword=o,e.user={}}function o(){e.error=void 0,e.message=void 0,e.user.newPassword===e.user.confirmPassword?t.changePassword(e.user.oldPassword,e.user.newPassword).then(function(){e.message="Senha alterada com sucesso"})["catch"](function(t){e.error="Senha incorreta, tente novamente!"}):e.error="Nova senha e senha de confirmação estão diferentes"}var e=this;e.title="changePasswordController",n()}angular.module("app.account").controller("changePasswordController",t),t.$inject=["Auth"]}(),function(){"use strict";function t(t){function n(){e.recoveryPassword=o,e.user={}}function o(){t.forgotPassword(e.user).then(function(){e.message="Solicitação recebida. Verifique seu e-mail para prosseguir com a sua solicitação."})["catch"](function(t){e.message="E-mail não encontrado."})}var e=this;e.title="forgotPasswordController",n()}angular.module("app.account").controller("forgotPasswordController",t),t.$inject=["Auth"]}(),function(){"use strict";function t(t,n){function o(){r.login=e}function e(){t.login({email:r.user.email,password:r.user.password}).then(function(t){n.closeThisDialog()})["catch"](function(t){r.error=t})}var r=this;r.title="loginController",o()}angular.module("app.account").controller("loginController",t),t.$inject=["Auth","$scope"]}(),function(){"use strict";function t(t,n){function o(){r.resetPassword=e}function e(){var o=n.token;t.resetPassword(r.newPassword,o).then(function(){r.message="Senha alterada com sucesso."})["catch"](function(t){r.message="Solicitação de troca de senha não encontrada."})}var r=this;r.title="resetPasswordController",o()}angular.module("app.account").controller("resetPasswordController",t),t.$inject=["Auth","$stateParams"]}(),function(){"use strict";function t(t,n){function o(){t.getCurrentUser(function(t){s.user=t}),s.editProfile=e,s.addSkill=r,s.removeSkill=a}function e(){s.error=void 0,s.message=void 0,n.update({id:s.user._id},s.user,function(){s.message="Perfil alterado com sucesso!"},function(t){403===t.status?s.error="Email já cadastrado em outra conta":s.error="Houver um erro inesperado ao acessar os dados do seu perfil, tente novamente mais tarde."})}function r(){s.skill&&s.user.skills.push(s.skill),s.skill=void 0}function a(t){s.user.skills.splice(t,1)}var s=this;s.title="settingsController",o()}angular.module("app.account").controller("settingsController",t),t.$inject=["Auth","User"]}(),function(){"use strict";function t(t,n,o){function e(){l.user={},l.user.skills=[],l.register=r,l.openLogin=a,l.addSkill=s,l.removeSkill=i,n.hasOwnProperty("ngDialogData")&&(l.user.name=n.ngDialogData.name),n.hasOwnProperty("ngDialogData")&&(l.user.email=n.ngDialogData.email)}function r(){t.createUser({name:l.user.name,email:l.user.email,phone:l.user.phone,isTasker:l.user.isTasker,skills:l.user.skills,bio:l.user.bio,password:l.user.password}).then(function(t){n.closeThisDialog()})["catch"](function(t){t=t.data,l.errors=t.errors})}function a(){n.closeThisDialog(),o.openConfirm({template:"app/account/login/login.html",className:"ngdialog-theme-plain",controller:"loginController",controllerAs:"vm",closeByDocument:!1,closeByNavigation:!0})}function s(){l.skill&&l.user.skills.push(l.skill),l.skill=void 0}function i(t){l.user.skills.splice(t,1)}var l=this;e()}angular.module("app.account").controller("signupController",t),t.$inject=["Auth","$scope","ngDialog"]}(),function(){"use strict";function t(t,n){function o(){a.apply=e,a.unapply=r,n.get(function(t){a.tasks=t.tasks},function(t){console.log(t)})}function e(t){n.apply({id:t._id},{},function(n){t.isCandidate=!0},function(t){console.log(t)})}function r(t){n.unapply({id:t._id},{},function(n){t.isCandidate=!1},function(t){console.log(t)})}var a=this;a.title="dashboardController",o()}angular.module("app.tasks").controller("dashboardController",t),t.$inject=["Auth","TaskService"]}(),function(){"use strict";function t(t,n){function o(){a.askTask=e,a.deactivate=r,t.mine(function(t){a.tasks=t.tasks},function(t){console.log(t)})}function e(){n.openConfirm({template:"app/tasks/task/task.html",className:"ngdialog-theme-plain",controller:"taskController",controllerAs:"vm"}).then(function(t){a.tasks.push(t)})}function r(n){t.deactivate({id:n._id},{},function(t){n.active=!1},function(t){console.log(t)})}var a=this;a.title="ordersController",o()}angular.module("app.tasks").controller("ordersController",t),t.$inject=["TaskService","ngDialog"]}(),function(){"use strict";function t(t,n,o,e,r){function a(){l.save=s,l.task={}}function s(){t.isLoggedIn().then(function(t){if(t){if(l.task.when){var e=l.task.when.split("/");l.task.when=e[1]+"/"+e[0]+"/"+e[2]}n.save(l.task,function(t){o.confirm(t),r.go("myOrders")},function(t){console.log(t)})}else i()})}function i(){e.openConfirm({template:"app/account/signup/signup.html",className:"ngdialog-theme-plain",controller:"signupController",controllerAs:"vm",closeByDocument:!1,closeByNavigation:!0})}var l=this;l.title="taskController",a()}angular.module("app.tasks").controller("taskController",t),t.$inject=["Auth","TaskService","$scope","ngDialog","$state"]}(),function(){"use strict";function t(t,n,o,e){function r(n){return n.headers=n.headers||{},t.get("token")&&o.isSameOrigin(n.url)&&(n.headers.Authorization="Bearer "+t.get("token")),n}function a(o){return 401===o.status&&((s||(s=e.get("$state"))).go("main"),t.remove("token")),n.reject(o)}var s,i={request:r,responseError:a};return i}angular.module("app.auth").factory("authInterceptor",t),t.$inject=["$cookies","$q","Util","$injector"]}(),function(){"use strict";angular.module("app.auth").run(["$rootScope","$state","Auth",function(t,n,o){t.$on("$stateChangeStart",function(t,e){e.authenticate&&("string"==typeof e.authenticate?o.hasRole(e.authenticate,_.noop).then(function(e){return e?void 0:(t.preventDefault(),o.isLoggedIn(_.noop).then(function(t){n.go("main")}))}):o.isLoggedIn(_.noop).then(function(o){o||(t.preventDefault(),n.go("main"))}))})}])}(),function(){"use strict";function t(t,n,o,e,r,a,s,i){function l(t,r){return n.post("/auth/local",{email:t.email,password:t.password}).then(function(t){return o.put("token",t.data.token),$=s.get(),i.$emit("login",{}),$.$promise}).then(function(t){return w(r)(null,t),t})["catch"](function(t){return P.logout(),w(r)(t.data),e.reject(t.data)})}function u(){o.remove("token"),$={}}function c(t,n){return s.save(t,function(e){return o.put("token",e.token),$=s.get(),i.$emit("login",{}),w(n)(null,t)},function(t){return P.logout(),w(n)(t)}).$promise}function p(t,n,o){return s.changePassword({id:$._id},{oldPassword:t,newPassword:n},function(){return w(o)(null)},function(t){return w(o)(t)}).$promise}function f(t){if(0===arguments.length)return $;var n=$.hasOwnProperty("$promise")?$.$promise:$;return e.when(n).then(function(n){return w(t)(n),n},function(){return w(t)({}),{}})}function g(t){return 0===arguments.length&&P.getCurrentUser(function(t){return t.hasOwnProperty("role")}),P.getCurrentUser(null).then(function(n){var o=n.hasOwnProperty("role");return w(t)(o),o})}function d(t,n){var o=function(t,n){return C.indexOf(t)>=C.indexOf(n)};return arguments.length<2?o($.role,t):P.getCurrentUser(null).then(function(e){var r=e.hasOwnProperty("role")?o(e.role,t):!1;return w(n)(r),r})}function m(){return P.hasRole.apply(P,[].concat.apply(["admin"],arguments))}function h(){return o.get("token")}function v(t,n){return s.forgotPassword({},{email:t.email},function(){return w(n)(null)},function(t){return w(n)(t)}).$promise}function k(t,n,o){return s.resetPassword({controller:n},{password:t},function(){return w(o)(null)},function(t){return w(o)(t)}).$promise}var w=a.safeCb,$={},C=r.userRoles||[];o.get("token")&&"/logout"!==t.path()&&($=s.get());var P={login:l,logout:u,createUser:c,changePassword:p,getCurrentUser:f,isLoggedIn:g,hasRole:d,isAdmin:m,getToken:h,forgotPassword:v,resetPassword:k};return P}angular.module("app.auth").factory("Auth",t),t.$inject=["$location","$http","$cookies","$q","appConfig","Util","User","$rootScope"]}(),function(){"use strict";function t(t){return t("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}},forgotPassword:{method:"POST",params:{id:"forgot"}},resetPassword:{method:"POST",params:{id:"reset"}},update:{method:"PUT"}})}angular.module("app.auth").factory("User",t),t.$inject=["$resource"]}(),function(){"use strict";function t(){var t={bindToController:!0,controller:n,controllerAs:"vm",restrict:"EA",templateUrl:"components/footer/footer.html"};return t}function n(){}angular.module("app").directive("footer",t)}(),function(){"use strict";function t(t,o,e,r){function a(t,n,o){}var s={bindToController:!0,controller:n,controllerAs:"vm",link:a,restrict:"EA",scope:{},templateUrl:"components/header/header.html"};return s}function n(t,n,o,e){function r(){l.signup=a,l.login=s,l.logout=i,n.isLoggedIn().then(function(t){l.isLoggedIn=t})}function a(){t.openConfirm({template:"app/account/signup/signup.html",className:"ngdialog-theme-plain",controller:"signupController",controllerAs:"vm",closeByDocument:!1,closeByNavigation:!0})}function s(){t.openConfirm({template:"app/account/login/login.html",className:"ngdialog-theme-plain",controller:"loginController",controllerAs:"vm",closeByDocument:!1,closeByNavigation:!0})}function i(){n.logout(),n.isLoggedIn().then(function(t){l.isLoggedIn=t}),o.go("main")}var l=this;l.title="headerController",e.$on("login",function(t,o){n.isLoggedIn().then(function(t){l.isLoggedIn=t})}),r()}angular.module("app").directive("header",t),t.$inject=["ngDialog","Auth","$state","$rootScope"],n.$inject=["ngDialog","Auth","$state","$rootScope"]}(),function(){"use strict";function t(t){function n(){e.loginOauth=o}function o(n){t.location.href="/auth/"+n}var e=this;n()}angular.module("app.oauthButtons").controller("oauthButtonsController",t),t.$inject=["$window"]}(),function(){"use strict";function t(){var t={templateUrl:"components/oauth-buttons/oauth-buttons.html",controller:"oauthButtonsController",controllerAs:"vm",restrict:"EA",scope:{classes:"@"}};return t}angular.module("app.oauthButtons").directive("oauthButtons",t)}(),function(){"use strict";function t(t){function n(t){return angular.isFunction(t)?t:angular.noop}function o(t){var n=document.createElement("a");return n.href=t,""===n.host&&(n.href=n.href),n}function e(n,o){return n=r.urlParse(n),o=o&&[].concat(o)||[],o=o.map(r.urlParse),o.push(t.location),o=o.filter(function(t){return n.hostname===t.hostname&&n.port===t.port&&n.protocol===t.protocol}),o.length>=1}var r={safeCb:n,urlParse:o,isSameOrigin:e};return r}angular.module("app.util").factory("Util",t),t.$inject=["$window"]}();